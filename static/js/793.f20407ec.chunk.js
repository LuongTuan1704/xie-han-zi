"use strict";(self.webpackChunkxie_han_zi=self.webpackChunkxie_han_zi||[]).push([[793],{1981:function(e,n,t){t.d(n,{Z:function(){return y}});var r=t(9439),i=t(4165),s=t(5861),a=t(7313),c="FormData_wrapper__NyJqU",o="FormData_form-btn-group__67+HP",u="FormData_btnSubmit__LpozE",l="FormData_btnReset__+Cuwk",d=t(259),p=t(1309),f=t(6535),h=t(7241),m=t(6417),x={behavior:"smooth",block:"center"};function v(e,n,t){return e[n].scrollIntoView(x),e[n].style.borderColor="var(--LimeGreen)",(0,h.wr)(t)}var b=function(e){return new Promise(function(){var n=(0,s.Z)((0,i.Z)().mark((function n(t){var r,s;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=(0,i.Z)().mark((function n(t){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v(e,t,e[t].dataset.character).then((function(){e[t].style.borderColor="transparent"}));case 2:case"end":return n.stop()}}),n)})),s=0;case 2:if(!(s<e.length)){n.next=7;break}return n.delegateYield(r(s),"t0",4);case 4:s++,n.next=2;break;case 7:t(!0);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())};var y=function(e){var n=(0,a.useRef)(),t=(0,a.useState)(""),i=(0,r.Z)(t,2),s=i[0],h=i[1],x=(0,a.useState)(!1),v=(0,r.Z)(x,2),y=v[0],j=v[1];return(0,m.jsx)("div",{id:"form-wrapper",className:c,"data-f":!0,children:(0,m.jsxs)("form",{onReset:function(e){e.preventDefault(),n.current.focus(),h("")},onSubmit:function(t){t.preventDefault(),"PinyinScreen"===e.type?(0,f.X$)("toPinyin",s):(0,f.X$)("emitData",s),h(""),n.current.focus()},children:[(0,m.jsx)("textarea",{ref:n,className:"textarea",spellCheck:!1,value:s,onChange:function(e){h(e.target.value)},onFocus:e.isFocus,onBlur:e.isHide,tabIndex:1}),(0,m.jsxs)("div",{className:o,children:[(0,m.jsx)("button",{type:"submit",tabIndex:2,disabled:!(s.trim().length>0)||y,className:"".concat(s&&u),children:(0,m.jsx)(d.G,{icon:p.XCy})}),(0,m.jsx)("button",{type:"reset",tabIndex:3,disabled:!(s.trim().length>0)||y,className:"".concat(s&&l),children:(0,m.jsx)(d.G,{icon:p.g82})}),(0,m.jsx)("button",{disabled:y,onClick:function(){!function(e){var n=e.id,t=e.toggleTextToSpeechBtn;t();var r=Array.from(document.querySelector("#".concat(n)).childNodes);b(r).then(t)}({id:e.ttsp,toggleTextToSpeechBtn:function(){return j((function(e){return!e}))}})},children:(0,m.jsx)(d.G,{icon:p.AQZ})})]})]})})}},8793:function(e,n,t){t.r(n);var r=t(1413),i=t(3433),s=t(9439),a=t(7313),c=t(72),o=t(4491),u=t(6535),l=t(4346),d=t(3304),p=t(259),f=t(1309),h=t(1835),m=t(1981),x=t(6250),v=t(6417);n.default=function(e){var n=(0,a.useRef)(),t=(0,a.useState)(""),b=(0,s.Z)(t,2),y=b[0],j=b[1],Z=(0,a.useRef)(null),g=(0,a.useRef)(null),_=function(e){var n=e.detail;n.length&&j((0,i.Z)(n.replace(/"\n"/g,"")).join(" ").split(/\s+/).filter(Boolean))};return(0,d.Z)(["Escape"],(function(e){console.log("".concat(e," has been pressed.")),Z.current.children[0].style.display="none"}),{overrideSystem:!1,ignoreInputFields:!0,repeatOnHold:!1}),(0,d.Z)(["f"],(function(e){console.log("".concat(e," has been pressed.")),Z.current.children[0].style.display="flex"}),{overrideSystem:!1,ignoreInputFields:!0,repeatOnHold:!1}),(0,a.useEffect)((function(){return(0,u.on)("toPinyin",_),function(){(0,u.S1)("toPinyin",_)}})),(0,v.jsxs)("div",{className:x.Z.p_wp,children:[(0,v.jsxs)("div",{className:x.Z.hanzi_,children:[(0,v.jsx)("div",{className:x.Z.form_Wrapper,ref:Z,children:(0,v.jsx)(m.Z,{type:"PinyinScreen",ttsp:"text-wrapper-id",isFocus:function(){g.current&&clearTimeout(g.current),g.current=null},isHide:function(){g.current||(g.current=setTimeout((function(){Z.current.children[0].style.display="none"}),3e3))}})}),(0,v.jsx)("div",{className:x.Z["text-wrapper"],id:"text-wrapper-id",ref:n,children:y&&y.map((function(n,t){return(0,v.jsxs)("div",{className:x.Z.char_wrapper,"data-character":n,children:[(0,v.jsx)("span",{className:x.Z.char_pinyin,children:(0,c.ZP)(n)[0]}),!["\uff0c","\u3002","\uff1f","\u300a","\u300b","\uff01"].includes(n)&&(0,v.jsx)(l.ZP,{interactive:!0,hideOnClick:!0,placement:"bottom-start",render:function(t){return(0,v.jsx)("div",(0,r.Z)((0,r.Z)({className:"tippy-wrapper",tabIndex:"-1"},t),{},{children:(0,v.jsx)(h.default,{character:n,options:e.hanziComponentOptions})}))},children:(0,v.jsx)("span",{className:x.Z.char_hanzi,children:n})})]},t)}))})]}),(0,v.jsxs)("div",{className:x.Z.btns,children:[(0,v.jsx)("button",{onClick:function(){var e,n=(0,c.ZP)(y.join(" "),{segment:"segmentit",group:!0});e=n,navigator.clipboard.writeText(e.join(" ")).then(o.Am.success("to clipboard",{position:o.Am.POSITION.BOTTOM_CENTER}),(function(e){o.Am.error("Could not copy text: "+e,{position:o.Am.POSITION.BOTTOM_CENTER})}))},title:"copy to clipboard",children:(0,v.jsx)(p.G,{icon:f.kZ_})}),(0,v.jsx)("button",{onClick:function(){var e=new SpeechSynthesisUtterance(y);speechSynthesis.speaking||(e.lang="zh-CN",e.volume=1,speechSynthesis.speak(e))},title:"text to speech",children:(0,v.jsx)(p.G,{icon:f.AQZ})}),(0,v.jsx)("button",{onClick:function(){return j("")},children:"reset"}),(0,v.jsx)("label",{className:x.Z["slide-input"],style:{marginLeft:"auto"},children:(0,v.jsx)("input",{onChange:function(e){n.current.style.setProperty("--hanzi_size","".concat(e.target.value,"rem"))},type:"range",defaultValue:2.5,step:.5,min:1,max:5})})]})]})}}}]);