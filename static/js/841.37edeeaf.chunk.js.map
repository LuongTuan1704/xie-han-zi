{"version":3,"file":"static/js/841.37edeeaf.chunk.js","mappings":"oOACA,EAA0B,mCAA1B,EAAiF,6CAAjF,EAAyI,oCAAzI,EAA6L,yCAA7L,EAAsP,yC,SCUtP,SAASA,EAAeC,EAAOC,GAC9B,IAAAC,GAA8BC,EAAAA,EAAAA,UAAS,IAAGC,GAAAC,EAAAA,EAAAA,GAAAH,EAAA,GAAnCI,EAAOF,EAAA,GAAEG,EAAUH,EAAA,GACpBI,GAAUC,EAAAA,EAAAA,YAAWC,EAAAA,IA2B3B,OA1BAC,EAAAA,EAAAA,YAAU,YAETC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAC,SAAAC,IAAA,IAAAC,EAAA,OAAAH,EAAAA,EAAAA,KAAAI,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACiBC,EAAAA,GAAAA,QAAAA,QAAmB,MAAMC,UAAU,KAAD,EAA/CN,EAAIE,EAAAK,KACRhB,EAAWS,GAAM,wBAAAE,EAAAM,OAAA,GAAAT,EAAA,IAFlBH,EAID,GAAG,KACHa,EAAAA,EAAAA,qBAAoBxB,GAAK,WACxB,MAAO,CACNyB,YAAa,SAAUC,GAEtBN,EAAAA,GAAAA,YAAe,KAAMA,EAAAA,GAAAA,SAAUT,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAc,IAAA,OAAAf,EAAAA,EAAAA,KAAAI,MAAA,SAAAY,GAAA,cAAAA,EAAAV,KAAAU,EAAAT,MAAA,cAAAS,EAAAT,KAAA,EAC1BC,EAAAA,GAAAA,QAAAA,IAAeM,GAAG,KAAD,mBAAAE,EAAAL,OAAA,GAAAI,EAAA,MAEtBE,MAAIlB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAC,SAAAiB,IAAA,OAAAlB,EAAAA,EAAAA,KAAAI,MAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,OACLb,GAAW,SAAC0B,GACX,MAAM,GAANC,QAAAC,EAAAA,EAAAA,GAAWF,GAAS,CAAEN,GACvB,IACA,wBAAAK,EAAAR,OAAA,GAAAO,EAAA,MAEAK,OAAM,SAAUC,GAChBC,QAAQC,MAAMF,EAAEG,MACjB,GACF,EAEF,KAECC,EAAAA,EAAAA,MAAA,OAAKC,UAAWC,EAAkBC,SAAA,EACjCC,EAAAA,EAAAA,KAAA,MAAIH,UAAWC,EAAyBC,SAC/B,OAAPtC,QAAO,IAAPA,OAAO,EAAPA,EAASwC,KAAI,SAACC,GACd,OACCF,EAAAA,EAAAA,KAAA,MACCH,UAAWC,EAEXK,QAAS,WACRxC,EAAQyC,YAAYF,EAAKG,OAC1B,EAAEN,SAQDG,EAAKG,QAXDH,EAAKI,IAeb,OAEDN,EAAAA,EAAAA,KAAA,OAAKH,UAAWC,EAAwBC,UACvCC,EAAAA,EAAAA,KAAA,UACCH,UAAWC,EACXK,SAAOpC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAE,SAAAsC,IAAA,OAAAvC,EAAAA,EAAAA,KAAAI,MAAA,SAAAoC,GAAA,cAAAA,EAAAlC,KAAAkC,EAAAjC,MAAA,cAAAiC,EAAAjC,KAAA,EACFC,EAAAA,GAAAA,QAAAA,QAAmB,KAAD,EACxBd,EAAW,IAAI,wBAAA8C,EAAA7B,OAAA,GAAA4B,EAAA,KACdR,SACF,cAML,CAEA,OAAeU,EAAAA,EAAAA,YAAWvD,E","sources":["webpack://xie-han-zi/./src/components/Sidebar/Sidebar_History/Sidebar_ListViews.module.scss?d40c","components/Sidebar/Sidebar_History/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Sidebar_ListViews_wrapper__7TFxE\",\"List_view_wrapper\":\"Sidebar_ListViews_List_view_wrapper__Fw8R+\",\"ViewItem\":\"Sidebar_ListViews_ViewItem__6zlyo\",\"clear-wrapper\":\"Sidebar_ListViews_clear-wrapper__NyHe9\",\"clear-htr-btn\":\"Sidebar_ListViews_clear-htr-btn__vBTm8\"};","import { sidebarContext } from \"../../../App\";\r\nimport {\r\n\tuseContext,\r\n\tuseImperativeHandle,\r\n\tuseState,\r\n\tuseEffect,\r\n\tforwardRef,\r\n} from \"react\";\r\nimport { Db } from \"./../../../database/Db_new\";\r\nimport styles from \"./Sidebar_ListViews.module.scss\";\r\n\r\nfunction HistoryDisplay(props, ref) {\r\n\tconst [History, setHistory] = useState([]);\r\n\tconst context = useContext(sidebarContext);\r\n\tuseEffect(() => {\r\n\t\t// console.log(\"display history  from db\");\r\n\t\t(async () => {\r\n\t\t\tlet data = await Db.history.orderBy(\"id\").toArray();\r\n\t\t\tsetHistory(data);\r\n\t\t})();\r\n\t}, []);\r\n\tuseImperativeHandle(ref, () => {\r\n\t\treturn {\r\n\t\t\tsaveHistory: function (v) {\r\n\t\t\t\t// save to db\r\n\t\t\t\tDb.transaction(\"rw\", Db.history, async function () {\r\n\t\t\t\t\tawait Db.history.add(v);\r\n\t\t\t\t})\r\n\t\t\t\t\t.then(async () => {\r\n\t\t\t\t\t\tsetHistory((prevProps) => {\r\n\t\t\t\t\t\t\treturn [...prevProps, v];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// console.log(\"add to history\");\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function (e) {\r\n\t\t\t\t\t\tconsole.error(e.stack);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t};\r\n\t});\r\n\treturn (\r\n\t\t<div className={styles[\"wrapper\"]}>\r\n\t\t\t<ul className={styles.List_view_wrapper}>\r\n\t\t\t\t{History?.map((item) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\tclassName={styles.ViewItem}\r\n\t\t\t\t\t\t\tkey={item._id}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tcontext.onItemClick(item._value);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t/* {item.ArrayOfChineseCharacter.map(\r\n\t\t\t\t\t\t\t\t({ Char_id, char }) => {\r\n\t\t\t\t\t\t\t\t\treturn <span key={Char_id}>{char}</span>;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t)} */\r\n\t\t\t\t\t\t\t\titem._value\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</ul>\r\n\t\t\t<div className={styles[\"clear-wrapper\"]}>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName={styles[\"clear-htr-btn\"]}\r\n\t\t\t\t\tonClick={async () => {\r\n\t\t\t\t\t\tawait Db.history.clear();\r\n\t\t\t\t\t\tsetHistory([]);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\tclear\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default forwardRef(HistoryDisplay);\r\n"],"names":["HistoryDisplay","props","ref","_useState","useState","_useState2","_slicedToArray","History","setHistory","context","useContext","sidebarContext","useEffect","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","wrap","_context","prev","next","Db","toArray","sent","stop","useImperativeHandle","saveHistory","v","_callee2","_context2","then","_callee3","_context3","prevProps","concat","_toConsumableArray","catch","e","console","error","stack","_jsxs","className","styles","children","_jsx","map","item","onClick","onItemClick","_value","_id","_callee4","_context4","forwardRef"],"sourceRoot":""}