"use strict";(self.webpackChunkxie_han_zi=self.webpackChunkxie_han_zi||[]).push([[521],{1835:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var i=t(1413),r=t(9439),a=t(7313),s=t(3453),c=t(72),o="HanziComponentStyle_wrapper__ePplx",l="HanziComponentStyle_Hanzi-wrapper__IDIbd",u="HanziComponentStyle_quiz-info__KtDWc",d="HanziComponentStyle_pinyin-wrapper__roeuL",m="HanziComponentStyle_controler__ynIIG",h="HanziComponentStyle_btn__azqZ+",p="HanziComponentStyle_right-section__Z2Esh",f=t(259),_=t(1309),x="Loading_loading-wrapper__5Ti6M",v="Loading_loading__OIcbi",j=t(6417);function w(e,n){var t=e.position;return(0,j.jsx)("div",{style:{position:"fixed"===t?t:"absolute"},className:x,ref:n,children:(0,j.jsx)("div",{className:v})})}var b=(0,a.forwardRef)(w);function y(e){var n=e.character,t=e.showPinyin,x=void 0===t||t,v=e.options,w=(0,a.useState)(!1),y=(0,r.Z)(w,2),g=y[0],Z=y[1],k=(0,a.useState)("amimation"),N=(0,r.Z)(k,2),C=N[0],S=N[1],z=(0,a.useState)(!1),T=(0,r.Z)(z,2),I=T[0],D=T[1],F=(0,a.useState)(!1),L=(0,r.Z)(F,2),R=L[0],P=L[1],G=(0,a.useRef)(),A=(0,a.useState)(null),H=(0,r.Z)(A,2),O=H[0],V=H[1],E=(0,a.useRef)(),M=new SpeechSynthesisUtterance(n);M.lang="zh-CN",M.volume=1;var q="quiz"===C?"draw":I?"pause":"amimation",B=function(){S((function(e){return"amimation"===e?"quiz":"amimation"}))};(0,a.useEffect)((function(){Z(!0);var e=G.current,t=s.Z.create(e,n,(0,i.Z)((0,i.Z)({},v),{},{onLoadCharDataSuccess:function(){Z(!1)},onLoadCharDataError:function(e){X.current.innerHTML="".concat(e)}}));return V(t),function(){e.innerHTML=null}}),[n,v]),(0,a.useEffect)((function(){"quiz"===C&&O.quiz({onMistake:function(){var e,n;null!==(n=(e=E.current).innerText)&&void 0!==n||(e.innerText="wrong!");var t=setTimeout((function(){clearTimeout(t),E.current.innerText=null}),800)},onCorrectStroke:function(){var e,n;null!==(n=(e=E.current).innerText)&&void 0!==n||(e.innerText="correct!");var t=setTimeout((function(){clearTimeout(t),E.current.innerText=null}),800)},onComplete:function(e){var n=setTimeout((function(){clearTimeout(n),B()}),1e3)}})}),[C,O]);var Q=(0,a.useCallback)((function(){R||"quiz"===C||(P(!0),D(!0),O.animateCharacter({onComplete:function(){P(!1),D(!1)}})),I&&R&&"quiz"!==C?O.pauseAnimation():O.resumeAnimation(),"quiz"!==C&&D(!I)}),[O,I,R,C]),X=(0,a.useRef)(),J=(0,a.useMemo)((function(){return(0,c.ZP)(n,{heteronym:!0})[0].map((function(e,n){return(0,j.jsx)("span",{className:"pinyin",children:e},n)}))}),[n]);return(0,j.jsxs)("div",{className:o,"data-character":n,children:[g&&(0,j.jsx)(b,{ref:X}),"quiz"===C&&(0,j.jsx)("div",{className:u,children:(0,j.jsx)("div",{ref:E})}),(0,j.jsx)("div",{className:l,style:{visibility:"".concat(g?"hidden":"visible")},ref:G,onClick:Q,title:q}),x&&(0,j.jsx)("div",{className:d,children:J}),(0,j.jsx)("div",{className:m,children:(0,j.jsxs)("div",{className:p,children:[(0,j.jsx)("button",{className:h,onClick:function(e){e.target.style.color="var(--LimeGreen)",speechSynthesis.speaking||(speechSynthesis.speak(M),M.onend=function(){this.style.color="inherit"}.bind(e.target))},children:(0,j.jsx)(f.G,{icon:_.j1t})}),(0,j.jsx)("button",{className:h,onClick:B,style:{color:"".concat("amimation"===C?"inherit":"var(--LimeGreen)")},children:(0,j.jsx)(f.G,{icon:_.TzT})})]})})]})}var g=(0,a.memo)(y)},1981:function(e,n,t){t.d(n,{Z:function(){return x}});var i=t(9439),r=t(4165),a=t(5861),s=t(7313),c="FormData_wrapper__NyJqU",o="FormData_form-btn-group__67+HP",l="FormData_btnSubmit__LpozE",u="FormData_btnReset__+Cuwk",d=t(259),m=t(1309),h=t(6535),p=t(6417);function f(e,n,t){var i=new SpeechSynthesisUtterance(t);return i.lang="zh-CN",speechSynthesis.speak(i),e[n].scrollIntoView({behavior:"smooth",block:"center"}),e[n].style.borderColor="var(--LimeGreen)",new Promise((function(e){i.onend=function(){e(!0)}}))}var _=function(e){return new Promise(function(){var n=(0,a.Z)((0,r.Z)().mark((function n(t){var i,a;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=(0,r.Z)().mark((function n(t){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f(e,t,e[t].dataset.character).then((function(){e[t].style.borderColor="transparent"}));case 2:case"end":return n.stop()}}),n)})),a=0;case 2:if(!(a<e.length)){n.next=7;break}return n.delegateYield(i(a),"t0",4);case 4:a++,n.next=2;break;case 7:t(!0);case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())};var x=function(e){var n=(0,s.useRef)(),t=(0,s.useState)(""),r=(0,i.Z)(t,2),a=r[0],f=r[1],x=(0,s.useState)(!1),v=(0,i.Z)(x,2),j=v[0],w=v[1];return(0,p.jsx)("div",{id:"form-wrapper",className:c,"data-f":!0,children:(0,p.jsxs)("form",{onReset:function(e){e.preventDefault(),n.current.focus(),f("")},onSubmit:function(t){t.preventDefault(),"PinyinScreen"===e.type?(0,h.X$)("toPinyin",a):(0,h.X$)("emitData",a),f(""),n.current.focus()},children:[(0,p.jsx)("textarea",{ref:n,className:"textarea",spellCheck:!1,value:a,onChange:function(e){f(e.target.value)},onFocus:function(){e.isFocus()},onBlur:function(){e.isHide()},tabIndex:1}),(0,p.jsxs)("div",{className:o,children:[(0,p.jsx)("button",{type:"submit",tabIndex:2,disabled:!(a.trim().length>0)||j,className:"".concat(a&&l),children:(0,p.jsx)(d.G,{icon:m.XCy})}),(0,p.jsx)("button",{type:"reset",tabIndex:3,disabled:!(a.trim().length>0)||j,className:"".concat(a&&u),children:(0,p.jsx)(d.G,{icon:m.g82})}),(0,p.jsx)("button",{disabled:j,onClick:function(){!function(e){var n=e.id,t=e.fn;t();var i=Array.from(document.querySelector("#".concat(n)).childNodes);_(i).then((function(){t()}))}({id:e.ttsp,fn:function(){return w((function(e){return!e}))}})},children:(0,p.jsx)(d.G,{icon:m.AQZ})})]})]})})}},6521:function(e,n,t){t.r(n),t.d(n,{default:function(){return ce}});var i=t(3433),r=t(9439),a=t(7313),s=t(259),c=t(1309),o=t(2751),l=t(1981),u=t(6250),d=t(6535),m=t(4925),h=t(4165),p=t(1413),f=t(5861),_=t(4942),x=t(72),v=t(4491),j=t(771),w={wrapper:"Form_wrapper__09h5k","form-header":"Form_form-header__hktGi","close-form":"Form_close-form__GAz5G","Field-group":"Form_Field-group__6OkGQ","form-btn-group":"Form_form-btn-group__DLlbt",btnSubmit:"Form_btnSubmit__n5KBY",btnReset:"Form_btnReset__tPmE9",input:"Form_input__emf-M"},b=t(6417);function y(e,n){var t=(0,a.useState)(!0),l=(0,r.Z)(t,2),u=l[0],d=l[1],m=(0,a.useRef)(),y=(0,a.useRef)();return(0,a.useImperativeHandle)(n,(function(){return{toggleForm:function(){d((function(e){return!e}))}}})),u&&(0,b.jsxs)("div",{id:"form-wrapper",className:w.wrapper,children:[(0,b.jsxs)("div",{className:w["form-header"],children:[(0,b.jsx)("span",{children:e.tag.tag_name}),(0,b.jsx)("button",{className:w["close-form"],onClick:function(){return e.back()},children:(0,b.jsx)(s.G,{icon:c.g82})})]}),(0,b.jsxs)("form",{onReset:function(e){e.target.reset(),m.current.focus()},onSubmit:function(n){return function(e,n,t){n.preventDefault();var a=new FormData(n.target);n.target.reset();var s=Array.from(a.entries()).reduce((function(e,n){var t=(0,r.Z)(n,2),i=t[0],a=t[1];return"note"===i&&(a=a.replaceAll("\n","<br>")),(0,p.Z)((0,p.Z)({},e),{},(0,_.Z)({},i,a))}),{});(0,i.Z)(s.hanzi).filter((function(e){return/[\u4e00-\u9fa5]/g.test(e)})).length>0?j.Db.transaction("rw",j.Db.datas,(0,f.Z)((0,h.Z)().mark((function n(){return(0,h.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,j.Db.datas.add((0,p.Z)((0,p.Z)({_id:(0,o.x0)(5),tag_id:e.tag._id},s),{},{is_a_learned_word:!1,view_count:0,createdAt:new Date})).then((function(){t.current.focus(),v.Am.success("Add data sucessfully!",{position:v.Am.POSITION.BOTTOM_LEFT})}));case 2:case"end":return n.stop()}}),n)})))).catch(console.error):(t.current.focus(),v.Am.error("Faild to add data!",{position:v.Am.POSITION.BOTTOM_LEFT}))}(e,n,m)},children:[(0,b.jsxs)("div",{className:w["Field-group"],children:[(0,b.jsx)("div",{className:w.item,children:(0,b.jsx)("input",{tabIndex:1,className:w.input,name:"hanzi",placeholder:"H\xe1n t\u1ef1",ref:m,onBlur:function(e){var n=e.target.value,t=n.length>2?{segment:"segmentit",group:!0}:{heteronym:!0};y.current.value=(0,x.ZP)(n,t).join(" , ")}})}),(0,b.jsx)("div",{className:w.item,children:(0,b.jsx)("input",{tabIndex:-1,className:w.input,placeholder:"B\xednh \xe2m",ref:y,name:"pinyin"})})]}),(0,b.jsxs)("div",{className:w["Field-group"],children:[(0,b.jsxs)("div",{className:w.item,children:[(0,b.jsx)("input",{tabIndex:2,className:w.input,placeholder:"H\xe1n vi\u1ec7t",name:"han_viet"})," "]}),(0,b.jsxs)("div",{className:w.item,children:[(0,b.jsx)("input",{tabIndex:2,className:w.input,placeholder:"D\u1ecbch ngh\u0129a",name:"Vietnamese_meaning"})," "]})]}),(0,b.jsx)("textarea",{style:{width:"50%",resize:"vertical"},className:w.input,spellCheck:!1,name:"Ghi ch\xfa",tabIndex:3}),(0,b.jsxs)("div",{className:w["form-btn-group"],children:[(0,b.jsx)("button",{type:"submit",tabIndex:4,className:w.btnSubmit,children:(0,b.jsx)(s.G,{icon:c.XCy})}),(0,b.jsx)("button",{type:"reset",tabIndex:5,className:w.btnReset,children:(0,b.jsx)(s.G,{icon:c.g82})})]})]})]})}var g=(0,a.forwardRef)(y),Z=t(4733),k=t(8566),N=t(3441),C=t(9274),S="style_micro-btn__DtnL6",z="style_pulse-ring__RtdLY",T=function(e){var n=(0,C.x6)({clearTranscriptOnListen:!0}),t=n.transcript,i=n.listening,r=n.browserSupportsSpeechRecognition;return(0,a.useEffect)((function(){e.speaking(t)})),(0,a.useEffect)((function(){}),[i]),r?(0,b.jsx)("button",{className:S,onClick:function(){C.ZP.startListening({language:"zh-CN",continuous:!1})},children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:z}),(0,b.jsx)(s.G,{icon:c.UOM})]}):(0,b.jsx)(s.G,{icon:c.EkX})}):null},I=t(7241),D=t(4976),F=t(1835),L="styles_ViewDetail-wrapper__twP2C",R="styles_header__vLVlz",P="styles_close-form__SMAWn",G="styles_wrapper__eCgvi",A="styles_HanziComponents-wrapper__sXnJP",H="styles_content-wrapper__zJ-Ts",O="styles_list__Ubz9m",V="styles_note__PY0i5",E="styles_footer__s4H31",M="checkbox_regular-checkbox__c1J35";function q(e,n){e.fn;var t=(0,a.useContext)(D.a7),o=(0,a.useState)({}),l=(0,r.Z)(o,2),u=l[0],d=l[1],m=u.hanzi?(0,i.Z)(u.hanzi).filter((function(e){return/[\u4e00-\u9fa5]/g.test(e)})):[];(0,a.useImperativeHandle)(n,(function(){return{setViewDetail:d}}));var h=(0,a.useCallback)((function(e,n){return null!==u&&void 0!==u&&u.hanzi?e.length>1?e.map((function(e,i){return(0,b.jsx)(F.default,{character:e,showPinyin:n.showPinyin,options:t.hanziComponentOptions},i)})):(0,b.jsx)(F.default,{character:e[0],showPinyin:n.showPinyin,options:t.hanziComponentOptions}):null}),[u]);return(null===u||void 0===u?void 0:u.hanzi)&&(0,b.jsxs)("div",{className:L,children:[(0,b.jsx)("div",{className:R,children:(0,b.jsx)("button",{className:P,onClick:function(){(0,I.se)("datas","_id",{key:u._id,field:"view_count",newValue:u.view_count+1}).then((function(){d({})}))},children:(0,b.jsx)(s.G,{icon:c.$9F})})}),(0,b.jsxs)("div",{className:G,children:[(0,b.jsx)("div",{className:A,children:h(m,{showPinyin:!1})}),(0,b.jsxs)("div",{className:H,children:[(0,b.jsxs)("ul",{className:O,children:[(0,b.jsxs)("li",{style:{cursor:"pointer"},onClick:function(){var e=new SpeechSynthesisUtterance(u.hanzi);speechSynthesis.speaking||(e.lang="zh-CN",e.volume=1,speechSynthesis.speak(e))},children:["hanzi : ",(0,b.jsx)("span",{children:u.hanzi})]}),(0,b.jsxs)("li",{children:["pinyin : ",(0,b.jsx)("span",{children:u.pinyin})]}),(0,b.jsxs)("li",{children:["Han Viet : ",(0,b.jsx)("span",{children:u.han_viet})]}),(0,b.jsxs)("li",{children:["Vietnamese :"," ",(0,b.jsx)("span",{children:u.Vietnamese_meaning})]})]}),(0,b.jsx)("div",{className:V,dangerouslySetInnerHTML:{__html:u.note}})]})]}),(0,b.jsxs)("div",{className:E,children:[(0,b.jsxs)("span",{children:["learned"," ",(0,b.jsx)("input",{className:M,type:"checkbox",id:"checkbox-1-2",defaultChecked:u.is_a_learned_word,onChange:function(e){return(0,I.se)("datas","_id",{key:u._id,field:"is_a_learned_word",newValue:e.target.checked})}}),(0,b.jsx)("label",{htmlFor:"checkbox-1-2"})]}),(0,b.jsxs)("span",{title:"View count",children:[(0,b.jsx)(s.G,{icon:c.Mdf,color:"hsl(163, 72%, 41%)"})," ",u.view_count]})]})]})}var B=(0,a.forwardRef)(q),Q=["style"],X=(0,a.lazy)((function(){return t.e(766).then(t.bind(t,1766))})),J=16,W={POSITION:v.Am.POSITION.BOTTOM_CENTER},Y={View:Symbol("view"),Form:Symbol("form"),Quiz:Symbol("quiz")},U={CardItem:Symbol("card"),ListItem:Symbol("item")};function K(e,n){return $.apply(this,arguments)}function $(){return $=(0,f.Z)((0,h.Z)().mark((function e(n,t){var r,a=arguments;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=function(e){var r=e[n].split(" "),a=t.split(" ");return"hanzi"===n?(0,i.Z)(e.hanzi).some((function(e){return(0,i.Z)(t).includes(e)})):r.some((function(e){return a.includes(e.toLowerCase())}))},"global"!==(a.length>2&&void 0!==a[2]?a[2]:"global")){e.next=4;break}return e.abrupt("return",j.Db.transaction("rw",j.Db.datas,(0,f.Z)((0,h.Z)().mark((function e(){var n;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.Db.datas.orderBy("_id").filter(r).toArray();case 2:return n=e.sent,e.abrupt("return",Promise.resolve(n));case 4:case"end":return e.stop()}}),e)})))));case 4:return e.abrupt("return",Promise.resolve(JSON.parse(sessionStorage.getItem("cache-data")).filter(r)||[]));case 5:case"end":return e.stop()}}),e)}))),$.apply(this,arguments)}function ee(e){var n=e.tagActive,t=e.props,i=e.datas;return(0,b.jsx)("ul",{className:u.Z.ul,children:null===i||void 0===i?void 0:i.map((function(e){return(0,b.jsxs)("li",{onClick:function(){var n;null===(n=t.viewDetailRef.current)||void 0===n||n.setViewDetail(e)},children:[(0,b.jsx)("span",{onClick:function(n){n.stopPropagation();var t=new SpeechSynthesisUtterance(e.hanzi);speechSynthesis.speaking||(t.lang="zh-CN",t.volume=1,speechSynthesis.speak(t))},children:e.hanzi}),(0,b.jsx)("span",{children:e.pinyin}),(0,b.jsx)("span",{children:e.han_viet}),(0,b.jsx)("span",{children:e.Vietnamese_meaning}),(0,b.jsx)("button",{onClick:function(i){i.stopPropagation(),(0,v.Am)((0,b.jsx)(N.Z,{customMsg:"".concat(e.hanzi),fn:(0,f.Z)((0,h.Z)().mark((function i(){return(0,h.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:(0,I.se)("tags","_id",{key:n._id,field:"QTestArrayID",newValue:n.QTestArrayID.filter((function(n){return n!==e._id}))}).then((function(){(0,I.D2)("datas","_id",e._id).then((function(){v.Am.info("deleted : ".concat(e._id),W),(0,I.Li)("datas","tag_id",{key:n._id}).then(t.fn.setDatas)}))}));case 1:case"end":return i.stop()}}),i)})))}))},children:(0,b.jsx)(s.G,{icon:c.Vui,color:"var(--BrightRed"})})]},e._id)}))})}function ne(e,n){var t=(0,a.useRef)(),i=(0,a.useRef)(),o=(0,a.useRef)(),l=(0,a.useState)(""),d=(0,r.Z)(l,2),h=d[0],f=d[1],_=(0,a.useState)(Y.View),x=(0,r.Z)(_,2),v=x[0],j=x[1],w=(0,a.useState)(U.ListItem),y=(0,r.Z)(w,2),N=y[0],C=y[1],S=(0,a.useState)([]),z=(0,r.Z)(S,2),D=z[0],F=z[1];(0,a.useImperativeHandle)(n,(function(){return{setTag:f}})),(0,a.useEffect)((function(){(0,I.Li)("datas","tag_id",{key:h._id}).then(F)}),[h,v]),(0,a.useEffect)((function(){return sessionStorage.setItem("cache-data",JSON.stringify(D)),function(){sessionStorage.setItem("cache-data",JSON.stringify([]))}}),[h,D]);var L=(0,a.useCallback)((function(e){e.preventDefault();var n=(0,I.Fm)(e),t=n["search-value"].trim().toLowerCase();t&&(n["search-wrapper"]?K(n["search-type"],t).then(F):K(n["search-type"],t,"local").then(F))}),[]);return(0,b.jsxs)("div",{className:u.Z.wrapper,children:[v===Y.View&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(B,{ref:i}),(0,b.jsx)("div",{ref:t,className:u.Z["list-wrapper"],children:N!==U.ListItem?(0,b.jsx)(k.Z,{children:function(e){var n=e.height,t=e.width,r=5;t<920&&(r=4),t<645&&(r=3),t<375&&(r=2);var s=(0,I.C1)(D,r);return(0,b.jsx)(Z.Ym,{className:"List",columnWidth:t/r-J/r,rowHeight:n/2,innerElementType:(0,a.forwardRef)((function(e,n){var t=e.style,i=(0,m.Z)(e,Q);return(0,b.jsx)("div",(0,p.Z)({ref:n,style:(0,p.Z)((0,p.Z)({},t),{},{paddingLeft:J,paddingTop:J})},i))})),rowCount:s.length,columnCount:r,height:n,width:t,children:function(e){var n=e.columnIndex,t=e.rowIndex,r=e.style;return function(e,n,t){return(0,b.jsx)(b.Fragment,{children:e&&(0,b.jsx)("div",{style:(0,p.Z)((0,p.Z)({},n),{},{left:n.left+J,top:n.top+J,width:n.width-J,height:n.height-J}),className:u.Z.card,children:(0,b.jsxs)("div",{className:u.Z.content,onClick:function(){var n;null===(n=t.viewDetailRef.current)||void 0===n||n.setViewDetail(e)},children:[(0,b.jsx)("div",{className:u.Z.front,children:e.hanzi}),(0,b.jsx)("div",{className:u.Z.back,children:(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{children:e.pinyin}),(0,b.jsx)("div",{children:e.han_viet}),(0,b.jsx)("div",{children:e.Vietnamese_meaning})]})})]})},e._id)})}(s[t][n],r,{viewDetailRef:i,tag:h,setDatas:F})}})}}):(0,b.jsx)(ee,{datas:D,tagActive:h,props:{viewDetailRef:i,fn:F}})}),(0,b.jsx)("div",{className:u.Z.bt_bar,children:(0,b.jsxs)("div",{className:u.Z.wrapper,children:[(0,b.jsx)("label",{className:u.Z["slide-input"],children:(0,b.jsx)("input",{onChange:function(e){null===t||void 0===t||t.current.style.setProperty("--Hanzi_FontSize","".concat(e.target.value,"rem"))},type:"range",defaultValue:2.5,step:.5,min:1,max:5})}),(0,b.jsxs)("div",{className:u.Z["search-wrapper"],children:[(0,b.jsxs)("form",{onSubmit:L,children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("select",{name:"search-type",children:[(0,b.jsx)("option",{value:"hanzi",defaultValue:"hanzi",children:"hanzi"}),(0,b.jsx)("option",{value:"pinyin",children:"pinyin"}),(0,b.jsx)("option",{value:"Vietnamese_meaning",children:"Vietnamese"})]}),(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"checkbox",defaultChecked:!0,name:"search-wrapper"})," ","-g"]})]}),(0,b.jsxs)("div",{className:u.Z["input-wrapper"],children:[(0,b.jsx)("input",{ref:o,type:"search",name:"search-value",placeholder:"search ..."}),(0,b.jsx)("button",{type:"submit",children:(0,b.jsx)(s.G,{icon:c.wn1})})]})]}),(0,b.jsx)(T,{speaking:function(e){o.current.value=e}}),(0,b.jsx)("button",{onClick:function(){(0,I.Li)("datas","tag_id",{key:h._id}).then(F)},children:(0,b.jsx)(s.G,{icon:c.QDM})})]}),(0,b.jsxs)("div",{children:[h._id&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{title:"form",onClick:function(){return j(Y.Form)},children:(0,b.jsx)(s.G,{icon:c.yXf})}),(0,b.jsx)("button",{onClick:function(){return j(Y.Quiz)},children:(0,b.jsx)(s.G,{icon:c.qxT})})]}),(0,b.jsx)("button",{onClick:function(){C((function(e){return e===U.ListItem?U.CardItem:U.ListItem}))},children:(0,b.jsx)(s.G,{color:"".concat(N===U.ListItem?"var(--LimeGreen)":""),icon:c.ZYZ})})]})]})})]}),v===Y.Form&&(0,b.jsx)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:(0,b.jsx)(g,{tag:h,back:function(){j(Y.View)}})}),v===Y.Quiz&&(0,b.jsx)(a.Suspense,{fallback:(0,b.jsx)("div",{children:"Loading..."}),children:(0,b.jsx)(X,{tag:h,datas:D,props:{back:function(){j(Y.View)}}})})]})}var te=(0,a.forwardRef)(ne),ie=(0,a.lazy)((function(){return Promise.resolve().then(t.bind(t,1835))})),re=(0,a.lazy)((function(){return t.e(608).then(t.bind(t,7608))})),ae=(0,a.lazy)((function(){return t.e(793).then(t.bind(t,8793))}));function se(e,n){var t=(0,a.useRef)(),m=(0,a.useRef)(),h=(0,a.useState)([]),p=(0,r.Z)(h,2),f=p[0],_=p[1],x=(0,a.useState)(null),v=(0,r.Z)(x,2),j=v[0],w=v[1],y=(0,a.useRef)(null),g=(0,a.useRef)(null),Z=(0,a.useCallback)((function(n){var t=n.detail;if(t){var r=(0,i.Z)(t).join(" ").trim().split(/\s+/).filter((function(e){return/[\u4e00-\u9fa5]/g.test(e)})).map((function(e){return{Char_id:(0,o.x0)(5),char:e}}));_(r),e.onHistoryChange({_id:(0,o.x0)(5),_value:t})}else _([])}),[]);return(0,a.useEffect)((function(){return(0,d.on)("emitData",Z),function(){(0,d.S1)("emitData",Z)}}),[]),(0,a.useImperativeHandle)(n,(function(){var e;return{setArrayOfHanzi:function(e){if("view_pinyin"!==j){var n=(0,i.Z)(e).join(" ").trim().split(/\s+/).filter((function(e){return/[\u4e00-\u9fa5]/g.test(e)})).map((function(e){return{Char_id:(0,o.x0)(5),char:e}}));_(n)}else(0,d.X$)("toPinyin",e)},setScreen:w,setTag:null===(e=m.current)||void 0===e?void 0:e.setTag,getFormData:Z,addTab:function(e){var n;null===(n=t.current)||void 0===n||n.addNewTab(e),f.length&&_([])}}})),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(a.Suspense,{fallback:(0,b.jsx)("div",{children:"Loading..."}),children:["viewr_char"===j&&(0,b.jsxs)("div",{className:u.Z.view_char_wrapper,children:[(0,b.jsxs)("div",{className:u.Z.form_Wrapper,ref:y,children:[(0,b.jsx)("button",{style:{display:"none"},className:u.Z.sh_f_btn,onClick:function(){y.current.children[0].style.display="none",y.current.children[1].style.display="flex"},children:(0,b.jsx)(s.G,{color:"var(--text-color)",icon:c.ccb})}),(0,b.jsx)(l.Z,{ttsp:"App-view-id",isFocus:function(){y.current.children[0].style.display="none",g.current&&clearTimeout(g.current),g.current=null},isHide:function(){g.current||(g.current=setTimeout((function(){y.current.children[0].style.display="block",y.current.children[1].style.display="none"}),3e3))}})]}),(0,b.jsx)("div",{id:"App-view-id",className:u.Z["App-viewer"],children:f.map((function(n){var t=n.Char_id,i=n.char;return(0,b.jsx)(ie,{character:i,options:e.hanziComponentOptions},t)}))})]}),"view_pinyin"===j&&(0,b.jsx)(ae,{hanziComponentOptions:e.hanziComponentOptions}),"note"===j&&(0,b.jsx)(re,{ref:t})]}),"tags"===j&&(0,b.jsx)(te,{ref:m})]})}var ce=(0,a.forwardRef)(se)},6535:function(e,n,t){function i(e,n){document.addEventListener(e,n)}function r(e,n){document.removeEventListener(e,n)}function a(e,n){var t=new CustomEvent(e,{detail:n});document.dispatchEvent(t)}t.d(n,{S1:function(){return r},X$:function(){return a},on:function(){return i}})},6250:function(e,n){n.Z={"App-viewer":"main_App-viewer__daWhl",view_char_wrapper:"main_view_char_wrapper__GUE+C",wrapper:"main_wrapper__sdIYc",header:"main_header__3tX03","ml-auto":"main_ml-auto__fSPg5",btns:"main_btns__KQE-4",p_wp:"main_p_wp__lO+D5",hanzi_:"main_hanzi___mHki6","text-wrapper":"main_text-wrapper__9cRri",char_wrapper:"main_char_wrapper__1xmmw",char_pinyin:"main_char_pinyin__5ZAKQ",char_hanzi:"main_char_hanzi__ryER9",form_Wrapper:"main_form_Wrapper__Oc4FG",sh_f_btn:"main_sh_f_btn__eVMGf","slide-input":"main_slide-input__WMIv2",main:"main_main__+3qZg","flex-row":"main_flex-row__0PHK6","main-content":"main_main-content__SWJRq","list-wrapper":"main_list-wrapper__xbh9D",card:"main_card__wZbH1",content:"main_content__-BumF",front:"main_front__0T9mG",back:"main_back__YexG-",ul:"main_ul__bnnev",bt_bar:"main_bt_bar__-F7ub","search-wrapper":"main_search-wrapper__AJ+lz","input-wrapper":"main_input-wrapper__bOp7n","test-wrapper":"main_test-wrapper__hq2Dy","test-container":"main_test-container__Zp3Ye","close-btn":"main_close-btn__rMuza","T-text":"main_T-text__RvitD","T-form":"main_T-form__TE9B6","T-wrapper":"main_T-wrapper__PPm--","T-submit":"main_T-submit__xy73m","T-list":"main_T-list__4fZy3",T_row:"main_T_row__23N2P",Item:"main_Item__6khwV"}}}]);