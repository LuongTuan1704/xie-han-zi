"use strict";(self.webpackChunkxie_han_zi=self.webpackChunkxie_han_zi||[]).push([[14],{4014:function(e,r,n){n.r(r),n.d(r,{default:function(){return v}});var t=n(3433),s=n(4165),a=n(5861),i=n(9439),c=n(8672),o=n(390),u=n(6851),l="Sidebar_ListViews_wrapper__7TFxE",d="Sidebar_ListViews_List_view_wrapper__Fw8R+",f="Sidebar_ListViews_ViewItem__6zlyo",_="Sidebar_ListViews_clear-wrapper__NyHe9",p="Sidebar_ListViews_clear-htr-btn__vBTm8",h=n(2559);function w(e,r){var n=(0,o.useState)([]),w=(0,i.Z)(n,2),v=w[0],x=w[1],b=(0,o.useContext)(c.Ut);return(0,o.useEffect)((function(){console.log("display history  from db"),(0,a.Z)((0,s.Z)().mark((function e(){var r;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Db.history.orderBy("id").toArray();case 2:r=e.sent,x(r);case 4:case"end":return e.stop()}}),e)})))()}),[]),(0,o.useImperativeHandle)(r,(function(){return{saveHistory:function(e){u.Db.transaction("rw",u.Db.history,(0,a.Z)((0,s.Z)().mark((function r(){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,u.Db.history.add(e);case 2:case"end":return r.stop()}}),r)})))).then((0,a.Z)((0,s.Z)().mark((function r(){return(0,s.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:x((function(r){return[].concat((0,t.Z)(r),[e])})),console.log("add to history");case 2:case"end":return r.stop()}}),r)})))).catch((function(e){console.error(e.stack)}))}}})),(0,h.jsxs)("div",{className:l,children:[(0,h.jsx)("ul",{className:d,children:null===v||void 0===v?void 0:v.map((function(e){return(0,h.jsx)("li",{className:f,onClick:function(){b.onItemClick(e._value)},children:e._value},e._id)}))}),(0,h.jsx)("div",{className:_,children:(0,h.jsx)("button",{className:p,onClick:(0,a.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Db.history.clear();case 2:x([]);case 3:case"end":return e.stop()}}),e)}))),children:"clear"})})]})}var v=(0,o.forwardRef)(w)}}]);
//# sourceMappingURL=14.5155d42a.chunk.js.map