{"version":3,"file":"static/js/14.5155d42a.chunk.js","mappings":"kOACA,EAA0B,mCAA1B,EAAiF,6CAAjF,EAAyI,oCAAzI,EAA6L,yCAA7L,EAAsP,yC,UCUtP,SAASA,EAAeC,EAAOC,GAC9B,OAA8BC,EAAAA,EAAAA,UAAS,IAAG,eAAnCC,EAAO,KAAEC,EAAU,KACpBC,GAAUC,EAAAA,EAAAA,YAAWC,EAAAA,IA2B3B,OA1BAC,EAAAA,EAAAA,YAAU,WACTC,QAAQC,IAAI,6BACZ,uBAAC,yGACiBC,EAAAA,GAAAA,QAAAA,QAAmB,MAAMC,UAAU,KAAD,EAA/CC,EAAI,OACRT,EAAWS,GAAM,0CAFlB,EAID,GAAG,KACHC,EAAAA,EAAAA,qBAAoBb,GAAK,WACxB,MAAO,CACNc,YAAa,SAAUC,GAEtBL,EAAAA,GAAAA,YAAe,KAAMA,EAAAA,GAAAA,SAAU,uBAAE,mGAC1BA,EAAAA,GAAAA,QAAAA,IAAeK,GAAG,KAAD,uCAEtBC,MAAI,uBAAC,mFACLb,GAAW,SAACc,GACX,MAAM,GAAN,eAAWA,GAAS,CAAEF,GACvB,IACAP,QAAQC,IAAI,kBAAkB,4CAE9BS,OAAM,SAAUC,GAChBX,QAAQY,MAAMD,EAAEE,MACjB,GACF,EAEF,KAEC,iBAAKC,UAAWC,EAAkB,WACjC,eAAID,UAAWC,EAAyB,SAC/B,OAAPrB,QAAO,IAAPA,OAAO,EAAPA,EAASsB,KAAI,SAACC,GACd,OACC,eACCH,UAAWC,EAEXG,QAAS,WACRtB,EAAQuB,YAAYF,EAAKG,OAC1B,EAAE,SAQDH,EAAKG,QAXDH,EAAKI,IAeb,OAED,gBAAKP,UAAWC,EAAwB,UACvC,mBACCD,UAAWC,EACXG,SAAO,uBAAE,mGACFhB,EAAAA,GAAAA,QAAAA,QAAmB,KAAD,EACxBP,EAAW,IAAI,2CACd,uBAOP,CAEA,OAAe2B,EAAAA,EAAAA,YAAWhC,E","sources":["webpack://xie-han-zi/./src/components/Sidebar/Sidebar_History/Sidebar_ListViews.module.scss?d40c","components/Sidebar/Sidebar_History/index.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"Sidebar_ListViews_wrapper__7TFxE\",\"List_view_wrapper\":\"Sidebar_ListViews_List_view_wrapper__Fw8R+\",\"ViewItem\":\"Sidebar_ListViews_ViewItem__6zlyo\",\"clear-wrapper\":\"Sidebar_ListViews_clear-wrapper__NyHe9\",\"clear-htr-btn\":\"Sidebar_ListViews_clear-htr-btn__vBTm8\"};","import { sidebarContext } from \"../../../App\";\r\nimport {\r\n\tuseContext,\r\n\tuseImperativeHandle,\r\n\tuseState,\r\n\tuseEffect,\r\n\tforwardRef,\r\n} from \"react\";\r\nimport { Db } from \"./../../../database/Db_new\";\r\nimport styles from \"./Sidebar_ListViews.module.scss\";\r\n\r\nfunction HistoryDisplay(props, ref) {\r\n\tconst [History, setHistory] = useState([]);\r\n\tconst context = useContext(sidebarContext);\r\n\tuseEffect(() => {\r\n\t\tconsole.log(\"display history  from db\");\r\n\t\t(async () => {\r\n\t\t\tlet data = await Db.history.orderBy(\"id\").toArray();\r\n\t\t\tsetHistory(data);\r\n\t\t})();\r\n\t}, []);\r\n\tuseImperativeHandle(ref, () => {\r\n\t\treturn {\r\n\t\t\tsaveHistory: function (v) {\r\n\t\t\t\t// save to db\r\n\t\t\t\tDb.transaction(\"rw\", Db.history, async function () {\r\n\t\t\t\t\tawait Db.history.add(v);\r\n\t\t\t\t})\r\n\t\t\t\t\t.then(async () => {\r\n\t\t\t\t\t\tsetHistory((prevProps) => {\r\n\t\t\t\t\t\t\treturn [...prevProps, v];\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tconsole.log(\"add to history\");\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(function (e) {\r\n\t\t\t\t\t\tconsole.error(e.stack);\r\n\t\t\t\t\t});\r\n\t\t\t},\r\n\t\t};\r\n\t});\r\n\treturn (\r\n\t\t<div className={styles[\"wrapper\"]}>\r\n\t\t\t<ul className={styles.List_view_wrapper}>\r\n\t\t\t\t{History?.map((item) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<li\r\n\t\t\t\t\t\t\tclassName={styles.ViewItem}\r\n\t\t\t\t\t\t\tkey={item._id}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tcontext.onItemClick(item._value);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t/* {item.ArrayOfChineseCharacter.map(\r\n\t\t\t\t\t\t\t\t({ Char_id, char }) => {\r\n\t\t\t\t\t\t\t\t\treturn <span key={Char_id}>{char}</span>;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t)} */\r\n\t\t\t\t\t\t\t\titem._value\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</ul>\r\n\t\t\t<div className={styles[\"clear-wrapper\"]}>\r\n\t\t\t\t<button\r\n\t\t\t\t\tclassName={styles[\"clear-htr-btn\"]}\r\n\t\t\t\t\tonClick={async () => {\r\n\t\t\t\t\t\tawait Db.history.clear();\r\n\t\t\t\t\t\tsetHistory([]);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\tclear\r\n\t\t\t\t</button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default forwardRef(HistoryDisplay);\r\n"],"names":["HistoryDisplay","props","ref","useState","History","setHistory","context","useContext","sidebarContext","useEffect","console","log","Db","toArray","data","useImperativeHandle","saveHistory","v","then","prevProps","catch","e","error","stack","className","styles","map","item","onClick","onItemClick","_value","_id","forwardRef"],"sourceRoot":""}